import{u as S,d as k,r as l,e as O,j as e}from"./main-czsaRuJ1.js";import{F as N}from"./Form-BNvjEyKw.js";import{I as _}from"./Input-vG2l26YZ.js";const w="_mobileOnly_1k0g0_1",D="_desktopOnly_1k0g0_11",c={mobileOnly:w,desktopOnly:D};function F(){return e.jsx("p",{children:"Begin your journey through onboarding."})}function T({value:r,onChange:t}){return e.jsx(e.Fragment,{children:e.jsx(_,{id:"display-name",label:"Display Name",value:r,onChange:t,placeholder:"Enter your display name",helpText:"This will be visible to others",required:!0,minLength:3,maxLength:20})})}function E({characterAvailable:r,character:t}){return e.jsx(e.Fragment,{children:r?t?e.jsxs("p",{children:["âœ… You have been linked with a character called ",t.first_name,". Their backstory: ",t.backstory]}):e.jsx("p",{style:{color:"orange"},children:"Something went wrong: we couldnâ€™t load your character. Try refreshing."}):e.jsx("p",{style:{color:"red"},children:"No characters are currently available. Please check back later."})})}function L(){return e.jsxs("div",{className:"onboarding-screenshots",children:[e.jsx("img",{src:"/images/tutorial-mob-p1-v2.png",className:c.mobileOnly,alt:"Mobile top"}),e.jsx("img",{src:"/images/tutorial-mob-p2-v2.png",className:c.mobileOnly,alt:"Mobile bottom"}),e.jsx("img",{src:"/images/tutorial-desktop-v2.png",className:c.desktopOnly,alt:"Desktop full"})]})}function A(){const r=S(),{step:t,progress:h,error:u,loading:g,characterAvailable:i}=k(),[s,p]=l.useState({}),[m,d]=l.useState(!1),{character:b,setCharacter:x}=O();if(l.useEffect(()=>{t===4&&r("/game")},[t,r]),g||t===void 0)return e.jsx("p",{children:"Loading onboarding statusâ€¦"});const y=async o=>{if(o.preventDefault(),m)return;if(t===1&&(!s.name||s.name.length<n)){alert(`Display name must be at least ${n} characters.`);return}d(!0);const a=await h(s);d(!1),a?.step===2&&x(a.character),a?.step===4&&r("/game")},n=3,f=()=>{switch(t){case 1:const o=s.name||"",a=o.length<n;return e.jsxs(e.Fragment,{children:[e.jsx(T,{value:o,onChange:v=>p({...s,name:v}),characterAvailable:i}),a&&e.jsxs("p",{style:{color:"red"},children:["Display name must be at least ",n," characters."]})]});case 2:return e.jsx(E,{characterAvailable:i,character:b});case 3:return e.jsx(L,{});default:return e.jsx(F,{})}},j=()=>{switch(t){case 1:return"Continue";case 2:return"Confirm Character";case 3:return"Finish Tutorial";default:return"Start Onboarding"}};return e.jsxs("div",{children:[e.jsxs("h1",{children:["ðŸ§­ Onboarding Step ",t??"..."]}),u&&e.jsx("p",{style:{color:"red"},children:u}),e.jsx(N,{onSubmit:y,submitLabel:j(),isSubmitting:m,disabled:t===1&&(s.name||"").length<n||!i&&t===2,children:f()})]})}export{A as default};
