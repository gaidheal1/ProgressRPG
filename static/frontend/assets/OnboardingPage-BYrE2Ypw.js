import{u as k,d as v,r as l,e as O,j as e}from"./main-DGDoed-U.js";import{F as N}from"./Form-D8BiUe4B.js";import{I as D}from"./Input-Bx1fC8Wd.js";import"./ButtonFrame-jvD8e5Qj.js";const _="_mobileOnly_1k0g0_1",w="_desktopOnly_1k0g0_11",c={mobileOnly:_,desktopOnly:w},F="/static/frontend/assets/tutorial-mob-p1-v2-DSRjmsbx.png",T="/static/frontend/assets/tutorial-mob-p2-v2-D2yXt8FA.png",E="/static/frontend/assets/tutorial-desktop-v2-Bzq3r1J3.png";function L(){return e.jsx("p",{children:"Begin your journey through onboarding."})}function C({value:s,onChange:t}){return e.jsx(e.Fragment,{children:e.jsx(D,{id:"display-name",label:"Display Name",value:s,onChange:t,placeholder:"Enter your display name",helpText:"This will be visible to others",required:!0,minLength:3,maxLength:20})})}function M({characterAvailable:s,character:t}){return e.jsx(e.Fragment,{children:s?t?e.jsxs("p",{children:["âœ… You have been linked with a character called ",t.first_name,". Their backstory: ",t.backstory]}):e.jsx("p",{style:{color:"orange"},children:"Something went wrong: we couldnâ€™t load your character. Try refreshing."}):e.jsx("p",{style:{color:"red"},children:"No characters are currently available. Please check back later."})})}function A(){return e.jsxs("div",{className:"onboarding-screenshots",children:[e.jsx("img",{src:F,className:c.mobileOnly,alt:"Mobile top"}),e.jsx("img",{src:T,className:c.mobileOnly,alt:"Mobile bottom"}),e.jsx("img",{src:E,className:c.desktopOnly,alt:"Desktop full"})]})}function P(){const s=k(),{step:t,progress:h,error:u,loading:p,characterAvailable:i}=v(),[n,g]=l.useState({}),[m,d]=l.useState(!1),{character:b,setCharacter:f}=O();if(l.useEffect(()=>{t===4&&s("/game")},[t,s]),p||t===void 0)return e.jsx("p",{children:"Loading onboarding statusâ€¦"});const x=async o=>{if(o.preventDefault(),m)return;if(t===1&&(!n.name||n.name.length<r)){alert(`Display name must be at least ${r} characters.`);return}d(!0);const a=await h(n);d(!1),a?.step===2&&f(a.character),a?.step===4&&s("/game")},r=3,y=()=>{switch(t){case 1:const o=n.name||"",a=o.length<r;return e.jsxs(e.Fragment,{children:[e.jsx(C,{value:o,onChange:S=>g({...n,name:S}),characterAvailable:i}),a&&e.jsxs("p",{style:{color:"red"},children:["Display name must be at least ",r," characters."]})]});case 2:return e.jsx(M,{characterAvailable:i,character:b});case 3:return e.jsx(A,{});default:return e.jsx(L,{})}},j=()=>{switch(t){case 1:return"Continue";case 2:return"Confirm Character";case 3:return"Finish Tutorial";default:return"Start Onboarding"}};return e.jsxs("div",{children:[e.jsxs("h1",{children:["ðŸ§­ Onboarding Step ",t??"..."]}),u&&e.jsx("p",{style:{color:"red"},children:u}),e.jsx(N,{onSubmit:x,submitLabel:j(),isSubmitting:m,disabled:t===1&&(n.name||"").length<r||!i&&t===2,children:y()})]})}export{P as default};
