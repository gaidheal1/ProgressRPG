{% extends 'base_generic.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}
<div id="gameplay-container">

  <div id="info-bar">

    <!-- Player info -->
    <div id="player-info" class="info-box">

      <div class="info-block left">
        <div class="info-line">
          <span>Player:</span>
          <span id="player-name" class="name-disp"></span>
        </div>
      </div>

      <div class="info-block right">
        <div class="info-line">
          <div class="level-info"><span>Level</span>
            <span id="player-level"></span>
          </div>
          <div class="xp-info"><span>XP:</span>
            <span id="player-xp"></span> / <span id="player-xp-next"></span>
          </div>
        </div>
      </div>

    </div>
    <!-- end of player info -->

    <!-- Character info -->
    <div id="character-info" class="info-box">

      <div class="info-block left">
        <div class="info-line person">
          <span>Character:</span>
          <span id="character-name" class="name-disp"></span>
        </div>
      </div>

      <div class="info-block right">
        <div class="info-line">
          <div class="level-info"><span>Level</span>
            <span id="character-level"></span>
          </div>
          <div class="xp-info"><span>XP:</span>
            <span id="character-xp"></span> / <span id="character-xp-next"></span>
          </div>
        </div>
      </div>

    </div>
    <!-- end of character info -->

  </div>
  <!-- end of info-bar -->


  <div id="game-content">

    <!-- Activity -->
    <div id="activity-section" class="game-section">

      <div id="activity-top-bar" class="section-top-bar">
        <div class="section-status">
          <span class="section-status-header">Activity:</span><span class="section-status-message"
            id="activity-status-text">waiting</span>
        </div>
        <div class="timer-frame">
          <span id="activity-timer" class="timer-text">00:00</span>
        </div>
      </div>

      <div class="current-item" id="current-activity-section">
        <div class="input-div" id="activity-input-div">
          <input class="field-div" type="text" id="activity-input" placeholder="Start activity" />
        </div>
      </div>


      <div class="button-frame" id="activity-buttons">
        <button class="button-filled" id="start-activity-btn">Start Activity</button>
        <button class="button-filled" id="stop-activity-btn" disabled="true" style="display: none;">Stop activity and
          submit</button>
      </div>


      <div class="list-section" id="today-activities">
        <h3 class="list-section-header">Today's activities</h3>
        <div id="activity-totals">
          <span id="activities-time-message"></span>
          <span id="activities-time-data"></span>
          <span id="activities-total-message"></span>
          <span id="activities-total-data"></span>
        </div>
        <ul class="list" id="activity-list">
          Searching for activities completed today...
        </ul>
      </div>
    </div>
    <!-- End of activity section -->

    <!-- Quest -->
    <div id="quest-section" class="game-section">
      <div class="section-top-bar">
        <div class="section-status">
          <span class="section-status-header">Quest:</span><span class="section-status-message"
            id="quest-status-text">waiting</span>
        </div>

        <div class="timer-frame">
          <span id="quest-timer" class="timer-text">00:00</span>
        </div>
      </div>

      <div class="current-item" id="current-quest-section">
        <div>
          <span class="current-item-header">Current quest:</span> <span class="current-item-message"
            id="current-quest-title">None</span>
        </div>

      </div>

      <div id="current-quest-description">None</div>
      <div id="current-quest-intro" class="quest-text"></div>

      <div class="list-section" id="quest-stages">
        <span class="list-section-header">Current stage:</span> <span id="current-quest-active-stage"></span>
        <ul class="list" id="quest-stages-list" hidden="true">
          <!-- Quest stages dynamically loaded here -->
        </ul>
      </div>

      <div id="current-quest-outro" class="quest-text" style="display: none;"></div>

      <div class="list-section hidden" id="quest-rewards">
        <h2 class="list-section-header">Quest rewards</h2>
        <ul class="list" id="quest-rewards-list">
        </ul>
      </div>

      <div class="button-frame" id="show-quests-btn-frame">
        <button class="button-filled" id="show-quests-btn">Show quests</button>
      </div>


      <!-- Modal for quest selection -->
      <div class="modal" id="quest-modal">
        <div class="modal-content">
          <button id="close-modal-btn" class="close-btn">x</button>

          <!-- Quest Categories and list-->
          <div class="quest-pane">
            <h2 id="quest-list-title">Available quests</h2>
            <ul id="quest-list-modal" class="list">
              <!-- Quests dynamically loaded here -->
            </ul>
          </div>

          <!-- Quest details -->
          <div class="details-pane">
            <h2 id="quest-title">No quest selected</h2>
            <p id="quest-description"></p>
            <div id="quest-rewards">
              <h3>Rewards:</h3>
              <div id="xp-reward" class="reward">
                <span class="reward-label">XP:</span>
                <span class="reward-value" id="xp-reward-value">0</span>
              </div>
              <div id="coin-reward" class="reward">
                <span class="reward-label">Coins:</span>
                <span class="reward-value" id="coin-reward-value">0</span>
              </div>
              <div id="other-rewards" class="reward">
                <ul class="list" id="other-rewards-list">
                  <!-- Other rewards dynamically loaded here -->
                </ul>
              </div>
            </div>
            <button class="button-filled" id="choose-quest-btn">Choose Quest</button>
          </div>

        </div>
      </div>
      <!-- End of modal-->


    </div>
    <!-- End of section Quest Display -->

  </div>
  <!-- End of section 'game-content' -->

</div>
<script src="{% static 'js/game.js' %}"></script>
<script>window.profile_id = "{{ request.user.profile.id }}";</script>

{% endblock %}